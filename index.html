<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Distribuidora Jazm√≠n</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
*{box-sizing:border-box;margin:0;padding:0;}
body{
font-family:'Segoe UI',sans-serif;
background:linear-gradient(135deg,#0f0f0f,#1c1c1c);
color:white;
overflow-x:hidden;
}

header{
display:flex;
align-items:center;
justify-content:center;
gap:10px;
background:#111;
padding:15px;
font-size:22px;
font-weight:bold;
box-shadow:0 4px 20px rgba(0,0,0,0.6);
position:relative;
}

header img{
width:45px;
height:45px;
border-radius:50%;
}

#contador{
position:absolute;
right:20px;
top:15px;
background:#00e676;
color:black;
font-weight:bold;
width:25px;
height:25px;
border-radius:50%;
display:flex;
align-items:center;
justify-content:center;
}

nav{
display:flex;
justify-content:center;
gap:12px;
padding:12px;
}

nav button{
padding:10px 18px;
border:none;
border-radius:25px;
background:#2c2c2c;
color:white;
cursor:pointer;
}

nav button.activo{
background:#00e676;
color:black;
font-weight:bold;
}

input, select{
display:block;
margin:10px auto;
padding:10px;
width:90%;
max-width:400px;
border-radius:25px;
border:none;
background:#1f1f1f;
color:white;
}

.productos{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(170px,1fr));
gap:15px;
padding:15px;
padding-bottom:300px;
}

.card{
background:#1b1b1b;
padding:15px;
border-radius:20px;
text-align:center;
box-shadow:0 6px 20px rgba(0,0,0,0.5);
}

.precio{color:#00e676;font-weight:bold;}
.sin{color:#ff5252;}
.disp{color:#00e676;}

.controles{
display:flex;
justify-content:center;
align-items:center;
gap:10px;
margin-top:8px;
}

.controles button{
width:32px;
height:32px;
border:none;
border-radius:50%;
background:#00e676;
color:black;
font-size:18px;
cursor:pointer;
}

/* BOT√ìN FLOTANTE */
#btnFlotante{
position:fixed;
bottom:20px;
right:20px;
width:60px;
height:60px;
border-radius:50%;
border:none;
background:#00e676;
color:black;
font-size:26px;
box-shadow:0 8px 25px rgba(0,0,0,0.7);
cursor:pointer;
z-index:1100;
}

/* CARRITO */
#carrito{
position:fixed;
bottom:0;
left:0;
right:0;
height:80vh;
background:#111;
border-top-left-radius:30px;
border-top-right-radius:30px;
box-shadow:0 -30px 80px rgba(0,0,0,0.95);
transform:translateY(90%);
transition:0.4s;
display:flex;
flex-direction:column;
z-index:1000;
}

#carrito.abierto{
transform:translateY(0);
}

.barra-arrastre{
width:60px;
height:6px;
background:#555;
border-radius:10px;
margin:10px auto;
cursor:pointer;
}

.carrito-contenido{
flex:1;
overflow-y:auto;
padding:15px;
}

.item-carrito{
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:8px;
font-size:14px;
}

.carrito-footer{
background:#1a1a1a;
padding:12px;
border-top:1px solid #333;
}

.carrito-footer button{
margin-top:10px;
width:100%;
padding:10px;
border:none;
border-radius:20px;
background:#00e676;
color:black;
font-weight:bold;
cursor:pointer;
}

.control-carrito{
display:flex;
align-items:center;
gap:6px;
}

.btn-cant{
width:28px;
height:28px;
border:none;
border-radius:50%;
background:#00e676;
color:black;
font-weight:bold;
cursor:pointer;
}

.cant-num{
min-width:20px;
text-align:center;
font-weight:bold;
}

.btn-eliminar{
background:#ff5252;
border:none;
border-radius:50%;
width:28px;
height:28px;
color:white;
font-weight:bold;
cursor:pointer;
}
</style>
</head>

<body>

<header>
<img src="https://i.postimg.cc/hPRrFtWD/Jazmin-png.jpg">
Distribuidora Jazm√≠n
<div id="contador">0</div>
</header>

<nav>
<button id="btnBebidas" class="activo">Bebidas</button>
<button id="btnAlmacen">Almac√©n</button>
</nav>

<input type="text" id="buscador" placeholder="Buscar producto...">
<div class="productos" id="productos"></div>

<button id="btnFlotante" onclick="toggleCarrito()">üõí</button>

<div id="carrito">
<div class="barra-arrastre" onclick="toggleCarrito()"></div>

<div class="carrito-contenido" id="listaCarrito"></div>

<div class="carrito-footer">
<div id="total"></div>
<div id="envioInfo"></div>

<select id="tipoEntrega" onchange="actualizar()">
<option value="domicilio">üöö Entrega a domicilio</option>
<option value="coordinado">ü§ù Entrega coordinada</option>
</select>

<select id="zona" onchange="actualizar()">
<option value="">Seleccionar zona</option>
<option value="santafe">Santa Fe Capital</option>
<option value="centro">Zona Centro</option>
<option value="santotome">Santo Tom√©</option>
</select>

<input type="text" id="direccion" placeholder="Direcci√≥n">

<div id="senia"></div>
<button onclick="confirmarPedido()">Confirmar Pedido</button>
</div>
</div>

<script>
const { jsPDF } = window.jspdf;

let productosBebidas=[], productosAlmacen=[], productos=[], todos=[], carrito={};
const MINIMO_GENERAL=60000;
const MINIMO_SANTO_TOME=80000;

function toggleCarrito(){
document.getElementById("carrito").classList.toggle("abierto");
}

function eliminarProducto(codigo){
delete carrito[codigo];
actualizar();
mostrar();
}

function cambiarCantidadCarrito(codigo,val){
if(carrito[codigo]){
carrito[codigo].cantidad+=val;
if(carrito[codigo].cantidad<=0) delete carrito[codigo];
actualizar();
mostrar();
}
}

function actualizar(){
let total=0,cant=0;
const lista=document.getElementById("listaCarrito");
lista.innerHTML="";

Object.values(carrito).forEach(p=>{
const sub=Number(p.precio)*p.cantidad;
total+=sub;
cant+=p.cantidad;

lista.innerHTML+=`
<div class="item-carrito">
<span style="flex:1;">${p.producto}</span>

<div class="control-carrito">
<button class="btn-cant" onclick="cambiarCantidadCarrito('${p.codigo}',-1)">‚àí</button>
<span class="cant-num">${p.cantidad}</span>
<button class="btn-cant" onclick="cambiarCantidadCarrito('${p.codigo}',1)">+</button>
<button class="btn-eliminar" onclick="eliminarProducto('${p.codigo}')">‚úï</button>
</div>
</div>`;
});

document.getElementById("contador").innerText=cant;

let envio=0;
let envioTexto="";
const tipo=document.getElementById("tipoEntrega").value;
const zona=document.getElementById("zona").value;

if(tipo==="coordinado"){
envioTexto="ü§ù Entrega coordinada sin costo";
}else{
let minimo=(zona==="santotome")?MINIMO_SANTO_TOME:MINIMO_GENERAL;

if(total>=minimo){
envioTexto="üöö Env√≠o GRATIS";
}else{
if(zona==="centro"){envio=2500;envioTexto="üöö Zona Centro: $2.500";}
else if(zona==="santotome"){envio=4000;envioTexto="üöö Santo Tom√©: $4.000";}
else if(zona==="santafe"){envio=1500;envioTexto="üöö Santa Fe Capital: $1.500";}
else envioTexto="Seleccionar zona";
}
}

document.getElementById("envioInfo").innerText=envioTexto;
let totalFinal=total+envio;
document.getElementById("total").innerText="Total: $"+totalFinal.toLocaleString();
document.getElementById("senia").innerText="Se√±a 50%: $"+Math.round(totalFinal*0.5).toLocaleString();
}
</script>

</body>
  </html>
