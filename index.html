<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Distribuidora Jazmín</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
*{box-sizing:border-box;}
body{margin:0;font-family:Arial;background:#0f0f0f;color:white;}
header{display:flex;align-items:center;justify-content:center;gap:10px;background:#181818;padding:15px;font-size:20px;font-weight:bold;position:relative;}
header img{width:40px;height:40px;border-radius:50%;}
#contador{position:absolute;right:15px;top:15px;background:#00c853;width:22px;height:22px;border-radius:50%;font-size:12px;display:flex;align-items:center;justify-content:center;}
nav{display:flex;justify-content:center;gap:10px;padding:10px;}
nav button{padding:8px 15px;border:none;border-radius:20px;background:#2a2a2a;color:white;cursor:pointer;}
nav button.activo{background:#00c853;}
input{display:block;margin:10px auto;padding:10px;width:90%;max-width:400px;border-radius:20px;border:none;background:#1f1f1f;color:white;}
.productos{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:12px;padding:12px;padding-bottom:180px;}
.card{background:#1c1c1c;padding:12px;border-radius:15px;text-align:center;}
.precio{color:#00e676;font-weight:bold;margin:5px 0;}
.controles{display:flex;justify-content:center;align-items:center;gap:10px;}
.controles button{width:30px;height:30px;border:none;border-radius:50%;background:#00c853;color:white;font-size:18px;cursor:pointer;}
#carrito{position:fixed;bottom:0;left:0;right:0;background:#1a1a1a;border-top-left-radius:25px;border-top-right-radius:25px;box-shadow:0 -4px 20px rgba(0,0,0,0.7);transform:translateY(65%);transition:0.4s;}
#carrito.abierto{transform:translateY(0);}
.marca{width:50px;height:6px;background:#777;border-radius:10px;margin:10px auto;cursor:pointer;}
.carrito-contenido{max-height:250px;overflow-y:auto;padding:10px;font-size:14px;}
.total{text-align:center;font-weight:bold;margin:10px;}
.btn{display:block;text-align:center;padding:12px;margin:10px;border-radius:20px;text-decoration:none;font-weight:bold;border:none;cursor:pointer;}
.confirmar{background:#00c853;color:white;}
.whatsapp{background:#25d366;color:white;}
.transferencia{background:#2962ff;color:white;}
.vaciar{text-align:center;color:#ff5252;cursor:pointer;margin-bottom:5px;}
#datosTransferencia{display:none;padding:10px;text-align:center;font-size:14px;background:#111;}
</style>
</head>

<body>

<header>
<img src="https://i.postimg.cc/hPRrFtWD/Jazmin-png.jpg">
Distribuidora Jazmín
<div id="contador">0</div>
</header>

<input type="text" id="buscador" placeholder="Buscar producto...">
<div class="productos" id="productos"></div>

<div id="carrito">
<div class="marca" onclick="toggleCarrito()"></div>
<div class="carrito-contenido" id="listaCarrito"></div>
<div class="vaciar" onclick="vaciarCarrito()">Vaciar carrito</div>
<div class="total" id="total"></div>

<button class="btn confirmar" onclick="confirmarPedido()">Confirmar pedido</button>
<a id="enviar" class="btn whatsapp" target="_blank">Enviar pedido por WhatsApp</a>

<div id="datosTransferencia">
<h3>Transferencia Bancaria</h3>
<p><strong>Alias:</strong> jazminonlineshop</p>
<p><strong>CVU:</strong> 0000003100054608688074</p>
<p><strong>Total a transferir:</strong> <span id="montoFinal"></span></p>
<p><strong>N° Pedido:</strong> <span id="numeroPedido"></span></p>
<button class="btn transferencia" onclick="descargarPDF()">Descargar comprobante PDF</button>
</div>

</div>

<script>
let productos=[
{codigo:"1",producto:"Producto ejemplo 1",precio:1000},
{codigo:"2",producto:"Producto ejemplo 2",precio:2000}
];

let carrito={};
let contadorPedidos=1;

function mostrarProductos(){
const cont=document.getElementById("productos");
cont.innerHTML="";
productos.forEach(p=>{
const div=document.createElement("div");
div.className="card";
div.innerHTML=`
<h4>${p.producto}</h4>
<div class="precio">$${p.precio}</div>
<div class="controles">
<button onclick="cambiar('${p.codigo}',-1)">-</button>
<span>${carrito[p.codigo]?.cantidad||0}</span>
<button onclick="cambiar('${p.codigo}',1)">+</button>
</div>`;
cont.appendChild(div);
});
}

function cambiar(codigo,valor){
if(!carrito[codigo]){
carrito[codigo]={...productos.find(p=>p.codigo===codigo),cantidad:0};
}
carrito[codigo].cantidad+=valor;
if(carrito[codigo].cantidad<=0){delete carrito[codigo];}
actualizarCarrito();
mostrarProductos();
}

function actualizarCarrito(){
let total=0;
let cantidad=0;
let mensaje="Hola, quiero pedir:%0A";
let listaHTML="";
Object.values(carrito).forEach(p=>{
let subtotal=p.precio*p.cantidad;
total+=subtotal;
cantidad+=p.cantidad;
listaHTML+=`<div>${p.producto} x${p.cantidad} - $${subtotal}</div>`;
mensaje+=`${p.producto} x${p.cantidad} - $${subtotal}%0A`;
});
document.getElementById("listaCarrito").innerHTML=listaHTML;
document.getElementById("total").innerText="Total: $"+total;
document.getElementById("contador").innerText=cantidad;
mensaje+=`Total: $${total}`;
document.getElementById("enviar").href=`https://wa.me/5493425695340?text=${mensaje}`;
}

function confirmarPedido(){
if(Object.keys(carrito).length===0){alert("Carrito vacío");return;}
let total=0;
Object.values(carrito).forEach(p=>{total+=p.precio*p.cantidad;});
let numero="DJ-"+new Date().getTime();
document.getElementById("numeroPedido").innerText=numero;
document.getElementById("montoFinal").innerText="$"+total;
document.getElementById("datosTransferencia").style.display="block";
}

function descargarPDF(){
const { jsPDF } = window.jspdf;
const doc = new jsPDF();
let y=20;
doc.addImage("https://i.postimg.cc/hPRrFtWD/Jazmin-png.jpg","JPEG",80,5,50,20);
doc.text("Distribuidora Jazmín",20,y); y+=10;
doc.text("Pedido: "+document.getElementById("numeroPedido").innerText,20,y); y+=10;
Object.values(carrito).forEach(p=>{
doc.text(`${p.producto} x${p.cantidad}`,20,y);
y+=8;
});
doc.text("Total: "+document.getElementById("montoFinal").innerText,20,y+10);
doc.text("Alias: jazminonlineshop",20,y+20);
doc.text("CVU: 0000003100054608688074",20,y+30);
doc.save("pedido.pdf");
}

function toggleCarrito(){
document.getElementById("carrito").classList.toggle("abierto");
}

function vaciarCarrito(){
carrito={};
actualizarCarrito();
mostrarProductos();
document.getElementById("datosTransferencia").style.display="none";
}

mostrarProductos();
</script>

</body>
</html>
